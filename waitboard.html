<!DOCTYPE html>
<html>
<head>
<title>Waitboard Controller</title>
<style>
body {
font-family: Arial, sans-serif;
text-align: center;
padding: 50px;
background: #f0f4f8;
}
#waitTime {
font-size: 100px;
margin: 20px 0;
color: #333;
}
button {
font-size: 80px;
width: 120px;
height: 120px;
margin: 0 30px;
border: none;
border-radius: 20px;
color: white;
background-color: #007BFF;
cursor: pointer;
box-shadow: 0 6px 12px rgba(0,123,255,0.4);
transition: background-color 0.3s;
user-select: none;
}
button:active {
background-color: #0056b3;
box-shadow: 0 3px 6px rgba(0,86,179,0.5);
}
</style>
</head>
<body>

<h1>Waitboard Controller</h1>
<div id="waitTime">0</div>
<button id="minusBtn">âˆ’</button>
<button id="plusBtn">+</button>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
import { getDatabase, ref, onValue, runTransaction } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyCLkpSbt2tULpalMQsiLiR48GTeqeg6QVY",
  authDomain: "waitboard.firebaseapp.com",
  databaseURL: "https://waitboard-default-rtdb.firebaseio.com",
  projectId: "waitboard",
  storageBucket: "waitboard.firebasestorage.app",
  messagingSenderId: "22252771116",
  appId: "1:22252771116:web:ffa17c8af6cd79e5443e89",
  measurementId: "G-EGELGGJRPV"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const waitTimeRef = ref(db, 'waitTime');

onValue(waitTimeRef, (snapshot) => {
const val = snapshot.val();
document.getElementById('waitTime').textContent = val ?? 0;
});

function updateWaitTime(change) {
runTransaction(waitTimeRef, (current) => {
let newVal = (current ?? 0) + change;
if (newVal < 0) newVal = 0;
return newVal;
});
}

// Update by 5 instead of 1
document.getElementById('plusBtn').onclick = () => updateWaitTime(5);
document.getElementById('minusBtn').onclick = () => updateWaitTime(-5);
</script>

</body>
</html>
